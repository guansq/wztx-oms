{extend name='extra@admin/content' /}

{block name="button"}

{/block}

{block name="style"}
<link href='https://cdn.bootcss.com/iCheck/1.0.2/skins/minimal/minimal.css' rel='stylesheet'>
{/block}

{block name="content"}
<main class="main">
    <div class="head_box">
        <a href="javascript:void(0);">司机管理</a>
        <span> >> </span>
        <a href="javascript:void(0);">车型设置</a>
    </div>
    <div class="con_box">
        <h1 class="h1">车型
            <p class="vehicle">

                <button type="button" class="layui-btn layui-btn-small" data-modal='{:url("$classuri/carstyleadd")}'><i
                        class="fa fa-plus"></i>新增车型</button>
                <button type="button" class="layui-btn layui-btn-small layui-btn-danger" id="rem_vehicle">选中车型显示</button>
            </p>
        </h1>
        <div >
            <span style="color:red">*点击选中车型显示，前端车型列表仅展示选中车型</span>
        </div>
        <form onsubmit="return false;" data-auto="" method="POST" style="width: 30%">
            <input type="hidden" value="resort" name="action"/>
            <div class="velength_table" >
                <table id="example" class="table table-bordered" width="100%" cellspacing="0">
                    <thead>
                    <tr>
                        <th class='list-table-check-td'>

                        </th>
                        <th class='list-table-sort-td' >
                            <button type="submit" class="layui-btn layui-btn-normal layui-btn-mini">排 序</button>
                        </th>
                        <th >名称</th>
                    </tr>
                    </thead>
                    <tbody>
                    {volist name='list' id='plist'}
                    <tr>
                        <td> <input type="checkbox" name="checkname" id="check{$plist.id}" value="{$plist.id}" {if $plist.status eq 0}checked="true"{/if}  ></td>
                        <td class='list-table-sort-td'>
                            <input name="_{$plist.id}" value="{$plist.sort}" class="list-sort-input"/>
                        </td>
                        <td>{$plist.name}</td>
                    </tr>
                    {/volist}
                    </tbody>
                </table>
            </div>
        </form>





    </div>

</main>
{/block}

{block name="script"}
<script>
  require(["icheck"], function () {
      $(document).ready(function () {
        initPage();
        initEvent();
      });
  });
  
  function initPage(){

  }
  
  function initEvent(){

      $('#add_vehicle').click(function () {
          $("#addstyle").show();
      });
      //删除
      $('#rem_vehicle').click(function () {
          var text="";
          $("input[name=checkname]").each(function() {
              if ($(this).is(':checked')) {
                  text += ","+$(this).val();
              }
          });
          $.ajax({
              'url' : '{:url("Driver/carstyledel")}',
              'type' : 'POST',
              'data' : {
                  'allid':text
              },
              'complete' : function(){
              },
              'success' : function(obj){
                  layer.closeAll();
                  if(obj.code == 2000){
                      layer.msg('修改成功', function(){
                          location.reload();
                      });
                  }else{
                      layer.alert(obj.msg);
                  }
              },
              'error' : function(){
                  layer.closeAll();
                  layer.alert('请求失败');
              }
          });
      });




    
  }

</script>
{/block}
